
<media-view-port>
  <media><img src="assets/img/home-for-sale.jpg"  ></media>
  <content>

    <mat-card>
      <mat-card-title>Complete Profile</mat-card-title>
      <mat-card-content>
    <mat-horizontal-stepper linear="false" #stepper="matHorizontalStepper">
    <mat-step [stepControl]="nameFG" [completed]="accountService.account.name ? true : nameFG.valid ? true : false">
      <form [formGroup]="nameFG"  (ngSubmit)="updateName()">
        <ng-template matStepLabel>Enter your name</ng-template>
        <mat-form-field>''
          <input matInput placeholder="Name" formControlName="nameFC" maxlength="accountService.NAME.max" required>
        </mat-form-field>
        <button mat-button color="primary" type="submit" matSuffix mat-icon-button [disabled]="!nameFG.valid" matStepperNext *ngIf="nameFG.controls.nameFC.value">
          <mat-icon>navigate_next</mat-icon>
        </button>
      </form>
    </mat-step>
    <mat-step [stepControl]="phoneFG">
      <form [formGroup]="phoneFG" (ngSubmit)="accountService.updatePhone(phoneFG.controls.phoneAreaCodeCtrl.value+phoneFG.controls.phonePreCtrl.value+phoneFG.controls.phonePostCtrl.value)">
        <ng-template matStepLabel>Enter your cell phone</ng-template>

          ( <mat-form-field style="width: 30px">
            <input matInput type=tel formControlName="phoneAreaCodeCtrl" required maxlength="3" >
          </mat-form-field> )

          <mat-form-field style="width: 30px">
            <input matInput type=tel formControlName="phonePreCtrl" required maxlength="3" >
          </mat-form-field> -

          <mat-form-field style="width: 40px">
            <input matInput formControlName="phonePostCtrl"  type=tel required maxlength="4">
          </mat-form-field>
          <button mat-icon-button color="primary" type="submit" matSuffix mat-icon-button [disabled]="!phoneFG.valid" matStepperNext *ngIf="phoneFG.controls.phonePostCtrl.value">
            <mat-icon>navigate_next</mat-icon>
          </button>
      </form>
    </mat-step>
    <mat-step [stepControl]="addressForm">
      <form [formGroup]="addressForm" (ngSubmit)=accountService.updateAddress(addressForm.value)>
        <ng-template matStepLabel>Enter your address</ng-template>
        <mat-form-field style="width: 60%">
          <input matInput placeholder="Address" formControlName="addressCtrl" required maxlength="accountService.ADDRESS.max" >
        </mat-form-field>
        <br>
        <mat-form-field style="width: 20%">
          <input matInput placeholder="City" formControlName="cityCtrl" required>
        </mat-form-field>
        <mat-form-field style="width: 20%">
          <mat-select placeholder="state" required formControlName="stateCtrl">
            <mat-option *ngFor="let state of appService.states" value="{{state.abbr}}">{{state.name}}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field style="width: 20%">
          <input matInput placeholder="Zip" formControlName="zipCtrl" required>
        </mat-form-field><br>

        <button mat-mini-fab color="primary" type="submit" matSuffix mat-icon-button [disabled]="!addressForm.valid" matStepperNext>
          <mat-icon>navigate_next</mat-icon>
        </button>
      </form>
    </mat-step>
    <mat-step optional [stepControl]="photoForm">
      <form [formGroup]="photoForm">
        <ng-template matStepLabel>Upload a photo</ng-template>
        <input type="file" (change)="onFileSelected($event)">
        <button mat-raised-button color="primary" (click)="accountService.uploadImg(selectedFile)">
          Upload
        </button>
      </form>
    </mat-step>
    <mat-step>
  <ng-template matStepLabel>Done</ng-template>
  You are now done.
  <div>
    <button mat-button matStepperPrevious>Back</button>
    <button mat-button (click)="stepper.reset()">Reset</button>
  </div>
</mat-step>
</mat-horizontal-stepper>
</mat-card-content>
</mat-card>
  </content>
</media-view-port>
